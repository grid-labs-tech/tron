apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: gatewayclass
spec:
  controllerName: traefik.io/gateway-controller
---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: gateway
  namespace: kube-system
spec:
  gatewayClassName: gatewayclass
  listeners:
    - name: http
      protocol: HTTP
      port: 80
      allowedRoutes:
        namespaces:
          from: All
    - name: https
      protocol: HTTPS
      port: 443
      allowedRoutes:
        namespaces:
          from: All
      tls:
        mode: Terminate
        certificateRefs:
          - name: gateway-tls
            kind: Secret
---
# Self-signed certificate for development
apiVersion: v1
kind: Secret
metadata:
  name: gateway-tls
  namespace: kube-system
type: kubernetes.io/tls
data:
  # Self-signed certificate valid for *.localhost and localhost
  # Generated with: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt -subj "/CN=localhost" -addext "subjectAltName=DNS:localhost,DNS:*.localhost"
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMRENDQWhTZ0F3SUJBZ0lVQmtmZkU5YUFXbkg0dWZvS1Y2cThDN3FnUmFJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZERVNNQkFHQTFVRUF3d0piRzlqWVd4b2IzTjBNQjRYRFRJMk1ERXlOVEF5TkRFek9Gb1hEVEkzTURFeQpOVEF5TkRFek9Gb3dGREVTTUJBR0ExVUVBd3dKYkc5allXeG9iM04wTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGCkFBT0NBUThBTUlJQkNnS0NBUUVBdXJ3am5xMlZHaS8wNGswZTg2RkthY1dwTkdZZEVmL0tGUzUzNTVRV0cvU2UKb21tdXgwM3V0UjMwYTJrU1JYTlYwODFTNlIwVEVtcS84SlM0OE1LTmw4dGsrQ3YzNmdsNGg0eHlDd0ExL0cyawpCcEI3bTBhNXB6NGVpRWF4dVV6c2lYUFkzTDRyUXc0NjBrV1J3MXpldFRGUmpoVTlSbWEyVFV1Qld6b3RmTjVmCjdhZzBoT01ocXJGTG4yZEVNcEQrRWJSMHJleVc3QTNpa0Z1Y2tzeFVRMDFIWWtrcERFY1AyQkx0OEpFVTB1WE8KQVdLWFVYc3BtRnZjUjdJbVliMnRTNTZBL21QUU5WSGhMY2RtNUdNR3RkTzN1a25HRHFvTk5KaEowVWtpSmpPSgoxYllsQWNWTDJLNEQ0R01aSnFoOGtGbXZHcFFHRzV4NEVTcWtiKzZLRVFJREFRQUJvM1l3ZERBZEJnTlZIUTRFCkZnUVVPN3FIVFhYeHNIY1VrUTc3L0QwMDFtQWpoTWt3SHdZRFZSMGpCQmd3Rm9BVU83cUhUWFh4c0hjVWtRNzcKL0QwMDFtQWpoTWt3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFoQmdOVkhSRUVHakFZZ2dsc2IyTmhiR2h2YzNTQwpDeW91Ykc5allXeG9iM04wTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCWFRiNVBpeFROTmk5V3FGVWxlNzBXCnVBMXFQUmpCVWh3NnRUVUdvZER6WUZPdCs1UjZ2OXFIenZZb3FKM3ppU2FZdjNyNUxURzh4TXJ5dVYwejROZHUKdFVmcThmNHR5Ym1sc3BDb3hkMUtnelY4Ymg4NXRvTTVwazQwWVFDL2QzQWVWSDZLWUJwYStqS3VlWWxIekNmbgpkYkZkem05MENwUkU4ZVhQNm1ha0kxSjRYejVSOHlDR3FURW9TSS9VRndWTHBRTS93ZXNiNVpkYUdjRVNwWStTCllQa1NPZFZJK2xocUVLU0tBZlcwQkNmQUZCU0loc2h0ZkJvNEJXVCtrS09zUTJHdWk5anFwb2VKc1FLL00ycHMKTFRBbFI3dmgzQTJIVXNORXpqYmttckkrWEg1b0RGQzl5QkF1Yk5pcmtvakMvY3dITEFCMXdNQktTVTZxK3g0SQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQzZ2Q09lclpVYUwvVGkKVFI3em9VcHB4YWswWmgwUi84b1ZMbmZubEJZYjlKNmlhYTdIVGU2MUhmUnJhUkpGYzFYVHpWTHBIUk1TYXIvdwpsTGp3d28yWHkyVDRLL2ZxQ1hpSGpISUxBRFg4YmFRR2tIdWJScm1uUGg2SVJyRzVUT3lKYzlqY3ZpdEREanJTClJaSERYTjYxTVZHT0ZUMUdaclpOUzRGYk9pMTgzbC90cURTRTR5R3FzVXVmWjBReWtQNFJ0SFN0N0pic0RlS1EKVzV5U3pGUkRUVWRpU1NrTVJ3L1lFdTN3a1JUUzVjNEJZcGRSZXltWVc5eEhzaVpodmExTG5vRCtZOUExVWVFdAp4MmJrWXdhMTA3ZTZTY1lPcWcwMG1FblJTU0ltTTRuVnRpVUJ4VXZZcmdQZ1l4a21xSHlRV2E4YWxBWWJuSGdSCktxUnY3b29SQWdNQkFBRUNnZ0VBTEc0K2hXOWsxajNKNVJ5WGZEMkkwS0Q4MFNCbzAxTUsyTDVkUGtjd2VZZGIKUldhaTlQNFlpWlN1aHU0UnNGK3djTHhlZVdQM0dUODRHenl2d20xd05rbHBaVmxFM0RWVHJlRGZjN21obnNYUgpyTlFzN1BYSGo4RUtqNzlPWXpvbjM4Nm1MMk82TkhMSzBTUkhlZlg3Y1o1aCtzNFg3Y3ZiblltVkpra3g4SThxCmtHR3VxTWtsbkJSaDh3Q1J2aGFnd083bkVkZ3F4bGdZOHhJSVRqYXErR0cxa2lNOElhQ2pMV2VwaVZRVGloVTIKVDRuaFVoM0hXWXc5bkZrQnZkSUtLWDVtRy9CTFJ3WHZZRVl5S1AzYm8xUjZyZlhkVFZkbmdZTmczZVNYaDVVRApMSEQrTXpXUDEwOFIzaEc2a3QvMlRwZjhJQnZvVlZScGlIT1Z4N0RDS1FLQmdRRG1jVXF4em5uTC9UT2ZvSVJOCjlVNG9rRFhRL0YxMUU5MWFTQldacnUxbDJ6WVdxRlVMNWw5U0tiNW16Z3hnZHZVb1J1aFN3MzY1KzhvZndtQngKdDVFd0lOT3NENmUzaVBHdmVNNjRiVEJLRzZtazkzNlBSWW9sUHFYaG1lTFZYT3ByYXZBdktTb0tYdUdNdnJBTApHaERLemNHNG5MNE1OaU5yYUZpSGZ6VEl4UUtCZ1FEUGNlZE9qRGtEUG1XRGZRVFJjQkw0K1ZaQTJiUUhGWjNDCk9VUy96RENKb3owS2JZVE5NTnYzQWoreURyZXVpV0w2VURzeUU4YU1JNTkvNGYzakExYXdlbTQrOEw5WDZqMTMKSi9Cc3ZySEE4UUpGRnFqcUZPTGFlYlpoUkh3V01sSk81Y1IyekpHRkJKRFBtZUVUN3RvMnBieGJJSGFMWmErMApSNzZZOTR2WTNRS0JnQngrMWVXMnlvalcvcE0ybmlXbHQ4eDhTS3RYQ1pkNHBWNk1tMTh0cWwxMkJmSTNUb3p5Cko4ZFpNaG8wVUlOOU1rT1F3Um02NHVqTW9lbmJkMkdZZVhPaUc0cWpSUElGRlIzRnFvcFR0aXp6enI1L2ZEN3IKTW5INGxUcVlkTnc5YVI5dlVkUURHeGU5TTliYm5abEIxK0c4SDhCY1lZUFJEZ0F5SHdCaVVueWhBb0dBWUh3bwpDNTZvdmR0OXQ4U2tRdzJQcFlIREhuS2ppMUFBaWwrOG5FREtxcG5rUUQ5a0wxUDBXMVVPYnpEdE9oN29qR2hZCndCZjJseVBTZ2RhSkVkZHhzSytoSzJFcWZpZVM0eU1PYm1YYm8xUDFyRkMzeS9oZTh5TDlNd3g1Y3BHQk92VWYKaGVuc0hTUmNmbEtpSDNWT3hYQWN4WDI1NVdnc2F2dWJxT1lxZzNrQ2dZQW9nbWMvQU9RVDJOeG9RV2kxQ1dqSgozeDQ2Rk8rdFFXdmpCajFMbkpOZm10NXN0RndVaU5LR2FRN0ZwV0U4WlpsZFdNOXp4c3VZVlp6eE1ReEJlWG9lCkdMeFY0MHJERmtqalVHcU52L1V5TDFNa0R1Q1hmQVB1aE5SSVNVR2VYK1Z1Z05MNkQ4b3ZTeERqSkJLNEFpRW0KL2NoTnlBNG5DWEY4K0lENzczOVdIZz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K